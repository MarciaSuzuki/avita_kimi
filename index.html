I understand! Let me create a complete solution that includes **mock audio generation** so you don't need to upload actual audio files. The app will generate synthetic audio from the acousteme data itself.

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AViTA | Complete Acousteme Demo</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root { --primary: #2c3e50; --secondary: #3498db; --accent: #e74c3c; --bridge: #f39c12; --success: #27ae60; --light: #ecf0f1; --dark: #2c3e50; --border: #bdc3c7; --bg: #f8f9fa; }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', sans-serif; background: var(--bg); color: #333; height: 100vh; overflow: hidden; }
        .app-container { display: flex; flex-direction: column; height: 100vh; }
        .app-header { background: white; padding: 12px 20px; border-bottom: 2px solid var(--border); display: flex; justify-content: space-between; align-items: center; box-shadow: 0 2px 10px rgba(0,0,0,0.08); }
        .logo { display: flex; align-items: center; gap: 10px; font-weight: 700; color: var(--primary); font-size: 1.2rem; }
        .logo i { color: var(--bridge); }
        .header-controls { display: flex; gap: 10px; align-items: center; }
        .btn { padding: 8px 16px; border: none; border-radius: 6px; cursor: pointer; font-weight: 600; font-size: 0.9rem; transition: all 0.2s; }
        .btn-primary { background: var(--secondary); color: white; }
        .btn-secondary { background: var(--light); color: var(--dark); border: 1px solid var(--border); }
        .btn:hover { transform: translateY(-1px); box-shadow: 0 4px 8px rgba(0,0,0,0.1); }
        .audio-file-info { font-size: 0.85rem; color: #666; background: var(--light); padding: 4px 12px; border-radius: 20px; }
        .main-content { display: flex; flex: 1; overflow: hidden; }
        .left-panel { flex: 1; display: flex; flex-direction: column; background: white; border-right: 1px solid var(--border); min-width: 400px; }
        .panel-title { padding: 15px 20px; font-weight: 700; color: var(--primary); border-bottom: 1px solid var(--border); background: #f8f9fa; display: flex; align-items: center; justify-content: space-between; }
        .audio-player { padding: 20px; display: flex; align-items: center; gap: 20px; border-bottom: 1px solid var(--border); }
        .play-btn { width: 50px; height: 50px; border-radius: 50%; background: var(--secondary); border: none; color: white; cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 1.2rem; }
        .audio-info { flex: 1; }
        .audio-title { font-weight: 700; font-size: 1rem; color: var(--primary); }
        .audio-meta { font-size: 0.85rem; color: #666; font-family: monospace; }
        .speed-control { display: flex; align-items: center; gap: 10px; }
        .speed-btn { background: var(--light); border: 1px solid var(--border); padding: 6px 12px; border-radius: 4px; cursor: pointer; }
        .acousteme-container { padding: 20px; flex: 1; overflow-y: auto; background: #f8f9fa; }
        .chunks-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; }
        .chunks-grid { display: flex; flex-wrap: wrap; gap: 8px; margin-bottom: 20px; }
        .chunk { padding: 10px 12px; background: white; border: 2px solid var(--border); border-radius: 8px; cursor: pointer; text-align: center; min-width: 60px; transition: all 0.2s; }
        .chunk:hover { border-color: var(--secondary); transform: translateY(-2px); }
        .chunk.selected { background: rgba(52, 152, 219, 0.15); border-color: var(--secondary); }
        .chunk.in-range { background: rgba(46, 204, 113, 0.15); border-color: var(--success); }
        .chunk.start-point { border-left: 4px solid var(--success); }
        .chunk.end-point { border-right: 4px solid var(--accent); }
        .chunk.playing { background: rgba(52, 152, 219, 0.25); border-color: var(--secondary); }
        .chunk.silence { opacity: 0.5; background: #f1f2f6; }
        .chunk-id { font-size: 0.8rem; color: #666; margin-bottom: 5px; }
        .chunk-units { font-family: monospace; font-size: 0.85rem; color: var(--primary); background: #f1f2f6; padding: 2px 6px; border-radius: 4px; }
        .selection-controls { padding: 15px 20px; border-top: 1px solid var(--border); background: white; display: flex; gap: 10px; }
        .selection-btn { flex: 1; padding: 10px; border: 2px solid var(--border); background: white; border-radius: 6px; cursor: pointer; font-weight: 600; display: flex; align-items: center; justify-content: center; gap: 8px; }
        .selection-btn.active { border-color: var(--secondary); background: rgba(52, 152, 219, 0.1); color: var(--secondary); }
        .selection-btn.play { background: var(--success); color: white; border-color: var(--success); }
        .selection-btn:disabled { opacity: 0.5; cursor: not-allowed; }
        .right-panel { flex: 1; display: flex; flex-direction: column; background: white; min-width: 400px; }
        .genre-section { padding: 20px; border-bottom: 1px solid var(--border); }
        .genre-title { font-weight: 700; color: var(--primary); margin-bottom: 15px; display: flex; align-items: center; gap: 10px; }
        .genre-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; }
        .genre-btn { padding: 12px; border: 2px solid var(--border); background: white; border-radius: 8px; cursor: pointer; text-align: center; font-weight: 600; color: #555; transition: all 0.2s; }
        .genre-btn:hover { border-color: var(--secondary); }
        .genre-btn.selected { background: var(--secondary); color: white; border-color: var(--secondary); }
        .tagging-interface { flex: 1; display: flex; flex-direction: column; overflow: hidden; }
        .tab-header { display: flex; background: #f8f9fa; border-bottom: 1px solid var(--border); overflow-x: auto; }
        .tab-btn { padding: 15px 20px; background: none; border: none; border-bottom: 3px solid transparent; cursor: pointer; font-weight: 600; color: #666; white-space: nowrap; display: flex; align-items: center; gap: 8px; }
        .tab-btn:hover { color: var(--primary); background: rgba(0,0,0,0.03); }
        .tab-btn.active { color: var(--secondary); border-bottom-color: var(--secondary); background: white; }
        .tab-content { flex: 1; padding: 20px; overflow-y: auto; display: none; }
        .tab-content.active { display: block; }
        .form-group { margin-bottom: 20px; }
        .form-label { display: block; margin-bottom: 8px; font-weight: 600; color: var(--primary); font-size: 0.95rem; }
        .form-select, .form-input { width: 100%; padding: 10px 12px; border: 1px solid var(--border); border-radius: 6px; font-size: 0.95rem; }
        .checkbox-group, .radio-group { display: flex; flex-wrap: wrap; gap: 15px; margin-top: 10px; }
        .checkbox-item, .radio-item { display: flex; align-items: center; gap: 8px; cursor: pointer; padding: 8px 12px; background: #f8f9fa; border-radius: 6px; border: 1px solid transparent; }
        .intensity-buttons { display: flex; gap: 10px; margin-top: 10px; }
        .intensity-btn { flex: 1; padding: 10px; text-align: center; border: 2px solid var(--border); border-radius: 6px; background: white; cursor: pointer; font-weight: 600; }
        .intensity-btn.selected { background: var(--secondary); color: white; border-color: var(--secondary); }
        .tagged-section { border-top: 1px solid var(--border); padding: 20px; }
        .tagged-title { font-weight: 700; color: var(--primary); margin-bottom: 15px; display: flex; justify-content: space-between; align-items: center; }
        .tagged-items { max-height: 200px; overflow-y: auto; display: flex; flex-direction: column; gap: 8px; }
        .tagged-item { padding: 10px 12px; background: #f8f9fa; border-radius: 6px; border-left: 4px solid var(--success); display: flex; justify-content: space-between; align-items: center; }
        .tagged-info { flex: 1; }
        .tagged-label { font-weight: 700; color: var(--primary); }
        .tagged-time { font-family: monospace; font-size: 0.8rem; color: #666; }
        .tagged-delete { background: none; border: none; color: #ccc; cursor: pointer; font-size: 1.2rem; }
        .tagged-delete:hover { color: var(--accent); }
        .mode-indicator { position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%); padding: 10px 20px; background: var(--bridge); color: white; border-radius: 30px; font-weight: 700; box-shadow: 0 4px 15px rgba(0,0,0,0.2); display: none; z-index: 1000; }
        .mode-indicator.visible { display: block; }
        .empty-state { text-align: center; padding: 40px 20px; color: #999; font-size: 0.95rem; }
        .file-upload { padding: 20px; border-bottom: 1px solid var(--border); background: #f8f9fa; }
        .upload-controls { display: flex; gap: 10px; }
        .upload-btn { display: flex; align-items: center; gap: 8px; }
        .waveform-container { padding: 10px 20px; background: #f1f2f6; border-top: 1px solid var(--border); }
        .waveform { height: 60px; background: #2c3e50; border-radius: 4px; position: relative; overflow: hidden; }
        .progress-bar { position: absolute; top: 0; left: 0; height: 100%; background: rgba(52, 152, 219, 0.5); width: 0%; transition: width 0.1s; }
        .time-marker { position: absolute; top: 0; height: 100%; width: 2px; background: var(--accent); z-index: 2; }
        .chunk-highlight { position: absolute; top: 0; height: 100%; background: rgba(46, 204, 113, 0.3); z-index: 1; }
        .hidden { display: none; }
        .upload-drop-area { border: 2px dashed var(--border); border-radius: 10px; padding: 30px; text-align: center; background: white; cursor: pointer; }
        .upload-drop-area:hover { border-color: var(--secondary); }
        .upload-icon { font-size: 2rem; color: var(--border); margin-bottom: 10px; }
        @media (max-width: 1024px) { .main-content { flex-direction: column; } .left-panel, .right-panel { min-width: auto; } }
    </style>
</head>
<body>
    <div class="app-container">
        <header class="app-header">
            <div class="logo"><i class="fas fa-bridge"></i> AViTA | Complete Acousteme Demo</div>
            <div class="header-controls">
                <span class="audio-file-info" id="file-info">Load acousteme JSON</span>
                <button class="btn btn-secondary" onclick="loadYourJson()"><i class="fas fa-file-import"></i> Load Your JSON</button>
                <button class="btn btn-primary" onclick="exportData()"><i class="fas fa-download"></i> Export</button>
            </div>
        </header>
        <div class="main-content">
            <!-- Left Panel: Acousteme Audio -->
            <div class="left-panel">
                <div class="file-upload">
                    <div class="upload-drop-area" id="drop-area" onclick="document.getElementById('json-upload').click()">
                        <div class="upload-icon"><i class="fas fa-file-upload"></i></div>
                        <div><strong>Click to upload acousteme JSON</strong></div>
                        <div style="font-size: 0.8rem; color: #666; margin-top: 5px;">Or drag and drop your file here</div>
                        <input type="file" id="json-upload" accept=".json" class="hidden" onchange="loadJsonFile(event)">
                    </div>
                    <div style="margin-top: 15px; text-align: center;">
                        <button class="btn btn-secondary" onclick="loadDemoData()"><i class="fas fa-play-circle"></i> Load Demo with Your JSON</button>
                    </div>
                </div>
                <div class="waveform-container">
                    <div class="waveform" id="waveform">
                        <div class="progress-bar" id="progress-bar"></div>
                    </div>
                </div>
                <div class="panel-title"><span><i class="fas fa-wave-square"></i> Acousteme Audio</span><span id="chunk-info">0 chunks</span></div>
                <div class="audio-player">
                    <button class="play-btn" id="play-btn" onclick="togglePlay()"><i class="fas fa-play"></i></button>
                    <div class="audio-info">
                        <div class="audio-title" id="audio-title">Synthetic Audio from Acoustemes</div>
                        <div class="audio-meta" id="audio-time">0:00 / 0:00</div>
                    </div>
                    <div class="speed-control">
                        <button class="speed-btn" onclick="changeSpeed()" id="speed-btn">1×</button>
                    </div>
                </div>
                <div class="acousteme-container">
                    <div class="chunks-header">
                        <div>Tap chunks to select sound segments</div>
                        <div class="chunks-controls">
                            <select id="chunk-size" onchange="renderChunks()">
                                <option value="50">Fine</option>
                                <option value="100" selected>Medium</option>
                                <option value="200">Coarse</option>
                            </select>
                        </div>
                    </div>
                    <div class="chunks-grid" id="chunks-grid"></div>
                </div>
                <div class="selection-controls">
                    <button class="selection-btn" id="btn-start" onclick="setMode('start')"><i class="fas fa-flag"></i> Set Start</button>
                    <button class="selection-btn" id="btn-end" onclick="setMode('end')"><i class="fas fa-flag-checkered"></i> Set End</button>
                    <button class="selection-btn play" onclick="playSelection()" id="btn-play" disabled><i class="fas fa-play"></i> Play Selection</button>
                    <button class="selection-btn" onclick="clearSelection()"><i class="fas fa-times"></i> Clear</button>
                </div>
            </div>
            <!-- Right Panel: Semantic Tagging -->
            <div class="right-panel">
                <div class="genre-section">
                    <div class="genre-title"><i class="fas fa-tags"></i> What type of speech is this?</div>
                    <div class="genre-grid" id="genre-grid"></div>
                </div>
                <div class="tagging-interface">
                    <div class="tab-header" id="tab-header"></div>
                    <div class="tab-content active" id="tab-content"></div>
                </div>
                <div class="tagged-section">
                    <div class="tagged-title"><span><i class="fas fa-tag"></i> Tagged Segments</span><span id="tag-count">0 tagged</span></div>
                    <div class="tagged-items" id="tagged-items">
                        <div class="empty-state">Select acousteme chunks and tag their meaning</div>
                    </div>
                </div>
            </div>
        </div>
        <div class="mode-indicator" id="mode-indicator">Tap a chunk to set start point</div>
    </div>
    <audio id="audio-element" style="display: none;"></audio>
    
    <!-- Your JSON data embedded directly -->
    <script id="acousteme-json" type="application/json">
    {
        "duration_sec": 238.6025,
        "num_frames": 11929,
        "segments": [
            {"start": 0.0, "end": 0.02, "unit_id": 31},
            {"start": 0.02, "end": 0.04, "unit_id": 38},
            {"start": 0.04, "end": 0.14, "unit_id": 43},
            {"start": 0.14, "end": 0.16, "unit_id": 10},
            {"start": 0.16, "end": 0.22, "unit_id": 43},
            {"start": 0.22, "end": 0.26, "unit_id": 53},
            {"start": 0.26, "end": 0.3401, "unit_id": 17},
            {"start": 0.3401, "end": 0.3601, "unit_id": 39},
            {"start": 0.3601, "end": 0.3801, "unit_id": 80},
            {"start": 0.3801, "end": 0.4001, "unit_id": 1},
            {"start": 0.4001, "end": 0.4401, "unit_id": 99},
            {"start": 0.4401, "end": 0.4801, "unit_id": 8},
            {"start": 0.4801, "end": 0.5201, "unit_id": 90},
            {"start": 0.5201, "end": 0.5601, "unit_id": 99},
            {"start": 0.5601, "end": 0.5801, "unit_id": 75},
            {"start": 0.5801, "end": 0.6001, "unit_id": 3},
            {"start": 0.6001, "end": 0.6401, "unit_id": 65},
            {"start": 0.6401, "end": 0.6801, "unit_id": 74},
            {"start": 0.6801, "end": 0.7201, "unit_id": 15},
            {"start": 0.7201, "end": 0.7401, "unit_id": 58},
            {"start": 0.7401, "end": 0.8001, "unit_id": 18},
            {"start": 0.8001, "end": 0.8201, "unit_id": 84},
            {"start": 0.8201, "end": 0.9202, "unit_id": 18},
            {"start": 0.9202, "end": 0.9402, "unit_id": 33},
            {"start": 0.9402, "end": 1.0002, "unit_id": 18},
            {"start": 1.0002, "end": 1.0202, "unit_id": 86},
            {"start": 1.0202, "end": 1.0602, "unit_id": 38},
            {"start": 1.0602, "end": 1.0802, "unit_id": 87},
            {"start": 1.0802, "end": 1.1002, "unit_id": 75},
            {"start": 1.1002, "end": 1.1202, "unit_id": 65},
            {"start": 1.1202, "end": 1.1602, "unit_id": 3},
            {"start": 1.1602, "end": 1.1802, "unit_id": 54},
            {"start": 1.1802, "end": 1.2002, "unit_id": 32},
            {"start": 1.2002, "end": 1.2202, "unit_id": 90},
            {"start": 1.2202, "end": 1.2402, "unit_id": 44},
            {"start": 1.2402, "end": 1.2602, "unit_id": 11},
            {"start": 1.2602, "end": 1.2802, "unit_id": 12},
            {"start": 1.2802, "end": 1.3002, "unit_id": 0},
            {"start": 1.3002, "end": 1.3202, "unit_id": 21},
            {"start": 1.3202, "end": 1.3402, "unit_id": 0},
            {"start": 1.3402, "end": 1.3602, "unit_id": 73},
            {"start": 1.3602, "end": 1.3802, "unit_id": 49},
            {"start": 1.3802, "end": 1.4203, "unit_id": 7},
            {"start": 1.4203, "end": 1.5003, "unit_id": 52},
            {"start": 1.5003, "end": 1.5603, "unit_id": 78}
        ]
    }
    </script>

    <script>
        // ============ STATE ============
        let currentGenre = null, currentTab = 'events', acoustemeChunks = [], annotations = [];
        let selectionMode = null, startIdx = null, endIdx = null;
        let audioElement = document.getElementById('audio-element');
        let isPlaying = false, playbackSpeed = 1;
        let acoustemeData = null;
        let audioContext = null;
        let audioSource = null;
        let isSyntheticAudio = false;

        // ============ GENRE CONFIG ============
        const genres = [
            { id: 'narrative', name: 'Narrative', icon: 'book' },
            { id: 'poetry', name: 'Poetry/Song', icon: 'music' },
            { id: 'teaching', name: 'Teaching', icon: 'chalkboard-teacher' },
            { id: 'dialogue', name: 'Dialogue', icon: 'comments' },
            { id: 'procedural', name: 'Procedural', icon: 'list-ol' },
            { id: 'descriptive', name: 'Descriptive', icon: 'eye' },
            { id: 'testimony', name: 'Testimony', icon: 'user-check' },
            { id: 'proverb', name: 'Proverb', icon: 'lightbulb' },
            { id: 'prayer', name: 'Prayer', icon: 'pray' },
            { id: 'ceremonial', name: 'Ceremonial', icon: 'place-of-worship' }
        ];

        // ============ INITIALIZATION ============
        document.addEventListener('DOMContentLoaded', () => {
            initGenres();
            setupAudioPlayer();
            setupDragAndDrop();
            // Auto-load the embedded JSON
            loadYourJson();
        });

        function initGenres() {
            const grid = document.getElementById('genre-grid');
            grid.innerHTML = genres.map(g => 
                `<button class="genre-btn" data-genre="${g.id}" onclick="selectGenre('${g.id}')">
                    <i class="fas fa-${g.icon}"></i> ${g.name}
                </button>`
            ).join('');
        }

        function setupDragAndDrop() {
            const dropArea = document.getElementById('drop-area');
            
            ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
                dropArea.addEventListener(eventName, preventDefaults, false);
            });

            function preventDefaults(e) {
                e.preventDefault();
                e.stopPropagation();
            }

            ['dragenter', 'dragover'].forEach(eventName => {
                dropArea.addEventListener(eventName, highlight, false);
            });

            ['dragleave', 'drop'].forEach(eventName => {
                dropArea.addEventListener(eventName, unhighlight, false);
            });

            function highlight() {
                dropArea.style.borderColor = 'var(--secondary)';
                dropArea.style.backgroundColor = 'rgba(52, 152, 219, 0.1)';
            }

            function unhighlight() {
                dropArea.style.borderColor = 'var(--border)';
                dropArea.style.backgroundColor = 'white';
            }

            dropArea.addEventListener('drop', handleDrop, false);

            function handleDrop(e) {
                const dt = e.dataTransfer;
                const files = dt.files;
                
                if (files.length > 0) {
                    const file = files[0];
                    if (file.type === 'application/json' || file.name.endsWith('.json')) {
                        loadJsonFileFromBlob(file);
                    } else {
                        alert('Please upload a JSON file');
                    }
                }
            }
        }

        // ============ LOAD YOUR JSON ============
        function loadYourJson() {
            try {
                const jsonElement = document.getElementById('acousteme-json');
                acoustemeData = JSON.parse(jsonElement.textContent);
                processAcoustemeData(acoustemeData);
                document.getElementById('file-info').textContent = 'Your JSON loaded successfully';
                generateSyntheticAudio();
            } catch (error) {
                alert('Error loading JSON: ' + error.message);
            }
        }

        function loadDemoData() {
            loadYourJson(); // Uses your embedded JSON
        }

        function loadJsonFile(event) {
            const file = event.target.files[0];
            loadJsonFileFromBlob(file);
        }

        function loadJsonFileFromBlob(file) {
            if (!file) return;
            
            const reader = new FileReader();
            reader.onload = (e) => {
                try {
                    acoustemeData = JSON.parse(e.target.result);
                    processAcoustemeData(acoustemeData);
                    document.getElementById('file-info').textContent = `Loaded: ${file.name}`;
                    generateSyntheticAudio();
                } catch (error) {
                    alert('Error parsing JSON file: ' + error.message);
                }
            };
            reader.readAsText(file);
        }

        // ============ PROCESS ACOUSTEME DATA ============
        function processAcoustemeData(data) {
            acoustemeChunks = [];
            
            // Group segments into chunks based on time
            const chunkSize = 0.5; // seconds per chunk
            const totalDuration = data.duration_sec;
            const numChunks = Math.ceil(totalDuration / chunkSize);
            
            // Create a map of segments for quick lookup
            const segmentMap = {};
            data.segments.forEach(seg => {
                const chunkIndex = Math.floor(seg.start / chunkSize);
                if (!segmentMap[chunkIndex]) segmentMap[chunkIndex] = [];
                segmentMap[chunkIndex].push(seg.unit_id);
            });
            
            for (let i = 0; i < numChunks; i++) {
                const chunkStart = i * chunkSize;
                const chunkEnd = Math.min((i + 1) * chunkSize, totalDuration);
                
                const unitIds = segmentMap[i] ? [...new Set(segmentMap[i])] : [];
                
                acoustemeChunks.push({
                    id: i,
                    startTime: chunkStart,
                    endTime: chunkEnd,
                    acoustemes: unitIds,
                    isSilence: unitIds.length === 0,
                    density: unitIds.length / (chunkEnd - chunkStart) // segments per second
                });
            }
            
            document.getElementById('chunk-info').textContent = `${acoustemeChunks.length} chunks`;
            renderChunks();
            drawWaveform();
        }

        // ============ GENERATE SYNTHETIC AUDIO ============
        function generateSyntheticAudio() {
            if (!acoustemeData || acoustemeChunks.length === 0) return;
            
            try {
                const totalDuration = acoustemeData.duration_sec;
                
                // Create a synthetic audio context
                if (!audioContext) {
                    audioContext = new (window.AudioContext || window.webkitAudioContext)();
                }
                
                const sampleRate = audioContext.sampleRate;
                const buffer = audioContext.createBuffer(1, sampleRate * totalDuration, sampleRate);
                const channelData = buffer.getChannelData(0);
                
                // Fill buffer with silence
                for (let i = 0; i < channelData.length; i++) {
                    channelData[i] = 0;
                }
                
                // Add synthetic sounds based on acousteme patterns
                acoustemeChunks.forEach(chunk => {
                    if (chunk.acoustemes.length > 0 && !chunk.isSilence) {
                        const startSample = Math.floor(chunk.startTime * sampleRate);
                        const endSample = Math.floor(chunk.endTime * sampleRate);
                        const chunkDuration = chunk.endTime - chunk.startTime;
                        
                        // Create a tone based on the acousteme unit IDs
                        const baseFreq = 200 + (chunk.acoustemes.reduce((a, b) => a + b, 0) % 800);
                        const amplitude = 0.1 * Math.min(1, chunk.density / 5);
                        
                        for (let i = startSample; i < endSample; i++) {
                            const t = (i - startSample) / sampleRate;
                            // Simple sine wave with some variation
                            channelData[i] += amplitude * Math.sin(2 * Math.PI * baseFreq * t);
                            // Add some noise for texture
                            channelData[i] += 0.05 * amplitude * (Math.random() * 2 - 1);
                        }
                    }
                });
                
                // Create audio source
                if (audioSource) {
                    audioSource.stop();
                }
                
                audioSource = audioContext.createBufferSource();
                audioSource.buffer = buffer;
                audioSource.connect(audioContext.destination);
                
                // Create a MediaElementSource for the audio element
                const mediaSource = audioContext.createMediaElementSource(audioElement);
                mediaSource.connect(audioContext.destination);
                
                // Create a blob URL for the synthetic audio
                audioContext.encodeAudioData(buffer).then(encodedBuffer => {
                    const blob = new Blob([encodedBuffer], { type: 'audio/wav' });
                    const url = URL.createObjectURL(blob);
                    audioElement.src = url;
                    
                    isSyntheticAudio = true;
                    document.getElementById('audio-title').textContent = 'Synthetic Audio from Acoustemes';
                    
                    audioElement.onloadedmetadata = () => {
                        updateAudioDisplay();
                        document.getElementById('audio-time').textContent = 
                            `0:00 / ${formatTime(audioElement.duration)}`;
                    };
                });
                
            } catch (error) {
                console.warn('Could not generate synthetic audio:', error);
                // Fallback: create silent audio
                createSilentAudioFallback();
            }
        }

        function createSilentAudioFallback() {
            const totalDuration = acoustemeData.duration_sec;
            const silentAudioContext = new AudioContext();
            const buffer = silentAudioContext.createBuffer(1, 
                silentAudioContext.sampleRate * totalDuration, 
                silentAudioContext.sampleRate);
            
            const blob = new Blob([new Uint8Array(buffer.length)], { type: 'audio/wav' });
            const url = URL.createObjectURL(blob);
            audioElement.src = url;
            
            document.getElementById('audio-title').textContent = 'Audio Simulation (Silent)';
            isSyntheticAudio = true;
        }

        // ============ ACOUSTEME FUNCTIONS ============
        function renderChunks() {
            const grid = document.getElementById('chunks-grid');
            const chunkSize = parseInt(document.getElementById('chunk-size').value);
            const displayCount = Math.min(acoustemeChunks.length, 100); // Show max 100 chunks
            
            grid.innerHTML = '';
            
            for (let i = 0; i < displayCount; i++) {
                const chunk = acoustemeChunks[i];
                const chunkEl = document.createElement('div');
                chunkEl.className = `chunk ${chunk.isSilence ? 'silence' : ''} 
                    ${startIdx === i ? 'start-point' : ''} 
                    ${endIdx === i ? 'end-point' : ''} 
                    ${startIdx !== null && endIdx !== null && i >= startIdx && i <= endIdx ? 'in-range' : ''}`;
                
                chunkEl.innerHTML = `
                    <div class="chunk-id">#${i + 1}</div>
                    <div class="chunk-units">${chunk.acoustemes.length > 0 ? 
                        (chunk.acoustemes.length > 1 ? `${chunk.acoustemes[0]}+` : chunk.acoustemes[0]) : 
                        '—'}</div>
                `;
                
                chunkEl.onclick = () => handleChunkClick(i);
                chunkEl.title = `${formatTime(chunk.startTime)}-${formatTime(chunk.endTime)} | Units: ${chunk.acoustemes.join(', ') || 'silence'}`;
                grid.appendChild(chunkEl);
            }
            
            if (acoustemeChunks.length > 100) {
                const moreEl = document.createElement('div');
                moreEl.className = 'chunk';
                moreEl.style.opacity = '0.7';
                moreEl.innerHTML = `<div class="chunk-id">...</div><div class="chunk-units
